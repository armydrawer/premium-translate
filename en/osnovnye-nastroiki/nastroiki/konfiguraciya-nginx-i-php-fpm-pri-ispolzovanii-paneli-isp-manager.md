# Конфигурация Nginx и PHP-FPM при использовании панели ISP Manager

Авторизуйтесь в панели ISP Manager под <mark style="color:red;">**root-пользователем**</mark> и перейдите в раздел "**Сайты**". Перейдите в режим редактирования настроек сайта.

<figure><img src="../../.gitbook/assets/image (766).png" alt=""><figcaption></figcaption></figure>

В блоке "**Обработчик (PHP)**" выберите обработчик и используемую версию PHP для вашего сайта&#x20;

Обработчики PHP в Apache, CGI и FastCGI имеют различные особенности и эффективность, что влияет на производительность и безопасность веб-приложений.

**Apache Module (mod\_php):**

* Этот метод интегрирует PHP непосредственно в сервер Apache, что позволяет Apache обрабатывать PHP-скрипты. Это делает его быстрым и эффективным, поскольку не требуется дополнительное время на запуск интерпретатора PHP для каждого запроса.
* Однако это может привести к проблемам с безопасностью и изоляцией, поскольку все PHP-скрипты выполняются в контексте сервера Apache.

**CGI (Common Gateway Interface):**

* CGI является старым и неэффективным способом обработки PHP-скриптов. Он запускает PHP-интерпретатор для каждого запроса, что может быть очень ресурсоёмким, особенно на сайтах с высокой нагрузкой.
* Преимуществом CGI является то, что он обеспечивает изоляцию между кодом PHP и веб-сервером, что может улучшить безопасность. Однако из-за высокой нагрузки на систему, этот метод редко используется сегодня [1](https://blog.layershift.com/which-php-mode-apache-vs-cgi-vs-fastcgi/).

**FastCGI:**

* FastCGI представляет собой улучшенную версию CGI, которая решает проблемы производительности, сохраняя при этом преимущества безопасности CGI. Он позволяет PHP-интерпретатору оставаться в памяти, обрабатывая несколько запросов, что значительно уменьшает нагрузку на систему.
* FastCGI обеспечивает лучшую масштабируемость и производительность по сравнению с CGI и mod\_php, особенно на сайтах с высокой нагрузкой. Однако он не позволяет использовать директивы PHP в файлах .htaccess, что может быть ограничением для некоторых сценариев [1](https://blog.layershift.com/which-php-mode-apache-vs-cgi-vs-fastcgi/).

Выбор между этими методами зависит от конкретных требований к веб-приложению, включая производительность, безопасность и удобство настройки. FastCGI часто считается лучшим выбором для современных веб-приложений благодаря его балансу между производительностью и безопасностью.

{% hint style="info" %}
Версия PHP должна совпадать с версией, указанной для скачанного вами архива

<img src="../../.gitbook/assets/image (614).png" alt="" data-size="original">
{% endhint %}

<figure><img src="../../.gitbook/assets/image (767).png" alt="" width="563"><figcaption></figcaption></figure>

В блоке "**Оптимизация и защита от DDoS**" установите указанные настройки (в списке расширений файлов для кэширования <mark style="color:red;">**обязательно**</mark> уберите "**js**").

<figure><img src="../../.gitbook/assets/image (768).png" alt="" width="563"><figcaption></figcaption></figure>
