# Работа сайта по HTTPS-соединению

{% hint style="warning" %}
При необходимости, вы можете [заказать услугу](https://premiumexchanger.com/uslugi/#usl4) по настройке сайта под работу по HTTPS-соединению у нас.
{% endhint %}

Для того, чтобы ваш сайт загружался по безопасному HTTPS-соединению необходимо:

1. Купить SSL сертификат у вашего хостинга.
2. В панели управления сайтом в разделе "**Настройки" → "Общие"** — указать адрес вашего сайта через HTTPS-протокол и сохранить изменения.

<figure><img src="../../.gitbook/assets/image (1080).png" alt=""><figcaption></figcaption></figure>

## Как указать адрес сайта через HTTPS-протокол, если вы не можете зайти в панель управления сайтом?

На сервере открыть файл `/wp-content/themes/exchanger/functions.php` и после строки `<?php` прописать следующие строки (не забудьте заменить слова "**ваш домен**" на ваш реальный домен) и сохранить изменения:

```
update_option('siteurl', 'https://ваш_домен');
update_option('home', 'https://ваш_домен');
```

После завершения настройки сайта необходимо удалить добавленные строки.

3. Сделать запрос в техническую поддержку вашего хостинга с просьбой установить SSL сертификат (при необходимости предоставить технической поддержке всю необходимую информацию), а также попросить поддержку организовать редирект с HTTP-соединения на HTTPS.

{% hint style="info" %}
Пример рабочего кода редиректа для хостинга reg.ru. Вероятно, он будет работать и на других хостингах. Данный код необходимо добавить в начало файла `.htaccess`, который расположен в корневой папке сайта.

**`Optons +FollowSymLinks`**

**`RewriteEngine On`**

**`RewriteBase /`**

**`RewriteCond %{SERVER_PORT} |^443$`**

**`RewriteCond %{HTTPS} off`**

**`RewriteRule ^(.*)$ https://ваш_домен/$1 [R=301,L]`**
{% endhint %}

4. На сервере открыть файл `ваш_домен/wp-config.php` и после строки `define(‘WP_DEBUG’, false);` пропишите следующие строки и сохранить изменения:

```
define('FORCE_SSL_LOGIN', true);
define('FORCE_SSL_ADMIN', true);
```

Если после выполненных настроек сайт работает с ошибками, возникает циклический редирект или отображается без стилей, то выполните следующие действия:

* В файле `ваш_домен/wp-config.php` после строки `define(‘WP_DEBUG’, false);` пропишите строку:

```
$_SERVER['HTTPS'] = 'on';
```

* В файле `ваш_домен/index.php` в самом конце файла пропишите строку

```
($_SERVER['HTTP_X_HTTPS'] == 'on') ? $_SERVER['HTTPS'] = 'on' : "";
```

Если ошибка сохраняется — воспользуйтесь [инструкцией по диагностике.](https://premium.gitbook.io/main/osnovnye-nastroiki/faq/diagnostika-i-reshenie-oshibok-pri-rabote-so-skriptom#nestabilnaya-rabota-saita-na-protokole-https)
