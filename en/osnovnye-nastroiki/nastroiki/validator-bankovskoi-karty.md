# Валидатор банковской карты

Модуль "**Информация о банковской карте (cardinfo)**" позволяет определить принадлежность указанной клиентов банковской карты к конкретному банку. Эту опцию можно использовать в направлениях обмена с участием банковских карт для того, чтобы:

• **не позволять** создавать заявки с картами конкретных банков\
• **позволять** создавать заявки только с картами конкретных банков

Для активации опции перейдите в раздел "**Модули**" и активируйте модуль "**Информация о банковской карте**".

<figure><img src="../../.gitbook/assets/image (384).png" alt=""><figcaption></figcaption></figure>

## Настройки модуля

После активации модуля перейдите в раздел "**Модули**" -> "**Определение типа банк. карты**" и настройте сам модуль.

<figure><img src="../../.gitbook/assets/image (1920).png" alt="" width="563"><figcaption></figcaption></figure>

**Запоминать уже проверенные карты:**\
• **Да** — ранее введенные клиентами номера банковских карт не будут проверяться повторно\
• **Нет** — данные по проверенным картам не будут запоминаться модулем

**Если API не предоставил данные:**\
• **Ничего** — заявка будет создаваться без проверки \
• **Ошибка** — заявка не будет создаваться, в форме обмена под полем для ввода номера карты будет отображаться ошибка "**номер счета не прошел валидацию ()**"

<figure><img src="../../.gitbook/assets/image (1921).png" alt="" width="305"><figcaption></figcaption></figure>

**Источник определения типа карты** — выберите один из источников для проверки номеров банковских карт, введенных клиентами:

**Проверяется только принадлежность к платежной системе (Visa, MasterCard, Mir), API-ключ не нужен:**\
• по первым цифрам номера карты\
**Проверяется принадлежность к конкретному банку (для каждого сервиса необходим отдельный API-ключ):**\
• [bincodes.com](https://www.bincodes.com/users/register/)\
• [binlist.net](https://binlist.net/)\
• [rapidapi.com](https://rapidapi.com/auth/sign-up)

**API ключ сервисов** — укажите API-ключ от выбранного в поле "**Источник определения типа карты"** сервиса из списка&#x20;

**Таймаут (сек.)** — время в течение которого сайт ожидает ответа от стороннего сервиса. Если ответ не будет получен в заданное время, то сайт продолжит свою работу далее, оставшись без ответа. Если время не задано или равно 0, то действует стандартный таймаут в 20 секунд. Универсального значения для таймаута нет, потому что он зависит от скорости работы конкретного сервиса.

**Проверять выбранные валюты** — выбор валют, для которых будет активирована опция

## Опция в настройках валюты:

<figure><img src="../../.gitbook/assets/image (1919).png" alt="" width="502"><figcaption></figcaption></figure>

На вкладке "**Настройки полей**" в полях "**Названия банков**" в валюте, для которой подключена опция, укажите названия банков, для которых будет проводиться валидация банковских карт.

{% hint style="info" %}
Если вы хотите позволять создавать заявки с конкретными банками — укажите названия этих банков (каждое название на новой строке). **При такой настройке для создания заявки будут разрешены только карты указанных банков.**



Если вы хотите создать запрет на создание заявок с картами конретных банков — укажите название этого банка с "**-**"

(пример : **-tinkoff bank**)

**При такой настройке для создания заявки будут разрешены все карты, кроме карт указанных банков.**
{% endhint %}

<details>

<summary>Названия некоторых банков для прохождения валидации (если выбран источник rapidapi.com)</summary>

**RUB:**

tinkoff bank\
sberbank of russia\
joint stock company alfa-bank\
ao raiffeisenbank\
vtb bank (public joint-stock company)\
public joint stock company promsvyazbank\
yoomoney, nbco llc

**UAH:**

jsc universal bank\
jsc cb privatbank

**KZT:**

kaspi bank jsc\
first heartland jusan bank joint stock company\
bank freedom finance kazakhstan joint stock company

</details>

{% hint style="success" %}
Модуль также поддерживает работу с другими названиями банков — если ваш клиент написал, что не прошел валидацию в форме обмена, запросите у него скриншот с текстом ошибки и укажите в настройке в валюте название банка (указанное в скобках) для прохождения валидации картами этого банка
{% endhint %}

{% hint style="danger" %}
Обращаем ваше внимание, что для каждого сервиса названия банков могут отличаться — рекомендуем указывать универсальные названия банков согласно сервису [**Bincheck.io**](https://bincheck.io/ru/bin-list) ([банки России](https://bincheck.io/ru/ru), [банки Украины](https://bincheck.io/ru/ua), [банки Казахстана](https://bincheck.io/ru/kz))
{% endhint %}

<figure><img src="../../.gitbook/assets/image (386).png" alt="" width="530"><figcaption></figcaption></figure>
