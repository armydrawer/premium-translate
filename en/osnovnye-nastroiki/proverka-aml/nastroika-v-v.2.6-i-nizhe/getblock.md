---
description: Настройка модуля GetBlock
---

# Getblock

1. Для начала работы необходимо в разделе "**Модули"** найти модуль **Getblock** по заголовку  и активировать его.

<figure><img src="../../../.gitbook/assets/Screenshot_1.png" alt=""><figcaption></figcaption></figure>

2. Необходимо перейти к настройкам модуля:

<figure><img src="../../../.gitbook/assets/image (921).png" alt=""><figcaption></figcaption></figure>

* **API ключ** – это ваш персональный ключ доступа. Для получения ключа напишите письмо на [info@getblock.net](mailto:info@getblock.net)
* **Критичный уровень риска** – это уровень риска в %, выше уровня которого вы не хотите принимать криптовалюту
* **Риск, если API не работает** – определяет какой уровень риска использоваться в случае системных сбоев. Например, если поставить 100 – система будет считать такой кошелек/транзакцию рискованной на 100% и не даст совершить обмен. И наоборот, если поставить 0 – система не будет отменять заявку даже в случае ошибок при проверке.
* [**Макс. риск (при автовыплате)**](#user-content-fn-1)[^1] – это уровень риска в % для "грязных" валют.

3. В этом же разделе можно протестировать работу API (адрес, транзакция, хэш).\
   Например, введите адрес, выберите валюту и нажмите кнопку "**Проверка**". Во всплывающем окне отобразится ответ сервера.

{% hint style="info" %}
Подробности в документации Getblock по [ссылке](https://getblock.net/api/documentation)
{% endhint %}

<figure><img src="../../../.gitbook/assets/image (1234).png" alt=""><figcaption></figcaption></figure>

4. Далее необходимо настроить направления обмена, для которых будут выполняться проверки уровня риска. Доступны следующие варианты:

<figure><img src="../../../.gitbook/assets/Screenshot_4.png" alt=""><figcaption></figcaption></figure>

* **Проверка счета Отдаю** – на этапе создания заявки проверяется адрес отправителя. Если уровень риска превышает допустимый и выбран вариант “**Да и запретить создавать заявку**” — клиент получит сообщение и не сможет создать заявку.
* **Проверка счета Получаю** – на этапе создания заявки проверяется адрес получателя.&#x20;
* **Проверка TxID** – выполняется проверка транзакции, которую отправил клиент. Необходима в тех случаях, когда клиент использует несколько входов в своей транзакции.&#x20;
* **Сумма обмена от** – позволяет настроить порог срабатывания проверок. Суммы, ниже указанных в этих полях, проверяться не будут.

<figure><img src="../../../.gitbook/assets/Screenshot_5 (1).png" alt=""><figcaption></figcaption></figure>

5. В разделе "**Направления обмена"**, на вкладке "**Информация для пользователя"** можно настроить вывод информации с результатами проверки:

<figure><img src="../../../.gitbook/assets/Screenshot_6 (2).png" alt=""><figcaption></figcaption></figure>

## Работа с модулем

Когда модуль активирован, в журнале заявок появляется поле **Getblock Risk**.&#x20;

Здесь отображается процент риска, если проверка уже выполнена, а также есть кнопка "**Проверить"**, если нужно выполнить проверку.

По клику на процент можно увидеть окно с расшифровкой проверки. В нижней части окна есть ссылка на полный результат проверки. В случае спорных ситуаций с клиентом можно отправить ему эту ссылку, чтобы он мог лично увидеть уровень риска и источники средств в его кошельке:

<figure><img src="../../../.gitbook/assets/Screenshot_7 (2).png" alt=""><figcaption></figcaption></figure>

Так будет выглядеть результат проверки по ссылке на сайте GetBlock:

<figure><img src="../../../.gitbook/assets/Screenshot_8 (1).png" alt=""><figcaption></figcaption></figure>

Все выполненные проверки можно увидеть в личном кабинете на сайте [getblock.net](https://getblock.net/)

<figure><img src="../../../.gitbook/assets/Screenshot_9.png" alt=""><figcaption></figcaption></figure>

## Особенности работы модуля

### v2.5 и ниже

GetBlock может возвращать ответ с результатами проверки до 25 секунд, но настроенный сервер по умолчанию ожидает ответ от сервиса в течение 5 секунд.

Чтобы избежать ситуации, когда сервис не будет укладываться в 5 секунд, можно увеличить время ожидания сервера через код (сервер должен быть высокопроизводительным) до 25 секунд в файле `index.php` по пути `wp-content/plugins/premiumbox/moduls/getblock`

<figure><img src="../../../.gitbook/assets/image (839).png" alt="" width="315"><figcaption><p>Измените значение на <strong>25</strong> и сохраните изменения в файле</p></figcaption></figure>

Если ответ от GetBlock будет получен в более короткий период, то ожидание завершится и заявка будет создана/отклонена (в зависимости от настроек).

### v2.6 и выше

Значение для вышеописанной опции указывается в настройках модуля в админ-панели, менять значение на сервере не требуется.

<figure><img src="../../../.gitbook/assets/image (350).png" alt=""><figcaption></figcaption></figure>

[^1]: все поля
