# Как перенести сайт

## Как перенести/скопировать сайт на поддомен

{% hint style="warning" %}
Если у вас уже есть рабочий сайт на основном домене, то вы можете перенести или скопировать его на поддомен. Однако, если вы планируете изменять настройки на поддомене, то позже возможны сложности с переносом базы данных обратно на основной домен.

Это связано с тем, что на основном сайте продолжается работа, где будут актуальные данные о заявках и новых пользователях, тогда как на поддомене, возможно, уже будут другие настройки. В таком случае синхронизировать данные уже не получится.
{% endhint %}

В лицензии на скрипт Premium Exchanger заложена возможность создания тестовой версии сайта на вашем поддомене для последующего переноса на основной домен.

Для этого укажите ваш поддомен на [странице "**Ваши лицензии**"](https://premiumexchanger.com/ulicense/):

<figure><img src="../../.gitbook/assets/изображение (142).png" alt="" width="547"><figcaption></figcaption></figure>

Вы можете создать поддомен через панель управления сервером ISP Manager по [инструкции](https://www.ihc.ru/articles/sozdanie-poddomenov-v-ispmanager.html).

Установите скрипт на поддомене по [инструкции](https://premium.gitbook.io/rukovodstvo-polzovatelya/pered-nachalom-raboty/instrukciya-po-ustanovke).

{% hint style="warning" %}
Обратите внимание, что в файлы лицензии информация о поддомене записывается после указания поддомена на странице "**Ваши лицензии**" — после указания поддомена <mark style="color:red;">**необходимо**</mark> обновить файлы лицензии на сервере, а также загрузить их в корневую папку сайта на поддомене.
{% endhint %}

После "поднятия" сайта на поддомене и тестирования функций, вам потребуется перенести сайт на основной домен. Для этого через ISP Manager перенесите все файлы в папку основного домена и измените название сайта в скопированной базе данных (таблица `_options` — поля `siteurl` и `home`).

<figure><img src="../../.gitbook/assets/image (706).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Если вы планируете перенести все заявки и настройки с поддомена на основной домен с полным замещением, то не должно возникнуть проблем.

Однако, если вы хотите перенести настройки с поддомена на основной домен (если на основном домене уже работает сайт), то синхронизировать два сайта не получится. Это связано с тем, что будут использоваться две отдельные базы данных, которые не будут связаны между собой.
{% endhint %}

## Как перенести сайт на другой сервер

### Подготовка к переносу

#### Что понадобится:

* Доступ к старому серверу (хостингу)
* Доступ к новому серверу (хостингу)
* FTP-клиент или файловый менеджер
* Программа для работы с архивами (WinRAR, 7-Zip и т.п.)
* Доступ к базе данных (phpMyAdmin или аналог)

### Шаг 1: Создание резервной копии файлов

#### Через файловый менеджер хостинга:

1. Войдите в панель управления старого хостинга
2. Откройте файловый менеджер
3. Перейдите в корневую папку сайта (обычно `public_html` или `www`)
4. Выделите все файлы и папки WordPress
5. Нажмите кнопку "Архивировать" или "Создать архив"
6. Выберите формат архива (рекомендуется ZIP)
7. Дождитесь создания архива
8. Скачайте получившийся архив на свой компьютер

#### Через FTP-клиент:

1. Подключитесь к серверу через FTP-клиент (FileZilla, WinSCP и др.)
2. Скачайте все файлы из корневой папки сайта
3. Создайте архив файлов на своем компьютере

{% hint style="danger" %}
**Важно:** Убедитесь, что скачаны все файлы, включая скрытые (например, `.htaccess`)
{% endhint %}

### Шаг 2: Создание резервной копии базы данных

1. Войдите в панель управления хостингом
2. Найдите раздел "Базы данных" или "phpMyAdmin"
3. Откройте phpMyAdmin
4. Выберите базу данных вашего сайта из списка слева
5. Перейдите на вкладку "Экспорт"
6. Выберите опции экспорта:
   * **Метод экспорта:** Быстрый (или Пользовательский для больших баз)
   * **Формат:** SQL
   * **Создание:** Добавить CREATE DATABASE
7. Нажмите "Вперед" или "Экспортировать"
8. Скачайте получившийся SQL-файл на компьютер

### Шаг 3: Загрузка файлов на новый сервер

#### Подготовка нового хостинга:

1. Убедитесь, что на новом хостинге поддерживается PHP и MySQL
2. Создайте новую базу данных (если он не была создана автоматически)
3. Запишите данные для подключения к БД:
   * Имя базы данных
   * Имя пользователя БД
   * Пароль пользователя БД
   * Хост базы данных (обычно `localhost`)

#### Загрузка файлов:

1. Войдите в файловый менеджер нового хостинга
2. Перейдите в корневую папку сайта (`public_html` или `www`)
3. Очистите папку от стандартных файлов хостинга (если есть)
4. Загрузите архив с файлами WordPress
5. Распакуйте архив в корневую папку
6. Убедитесь, что все файлы распакованы правильно

### Шаг 4: Восстановление базы данных

1. Откройте phpMyAdmin на новом хостинге
2. Выберите созданную базу данных
3. Перейдите на вкладку "Импорт"
4. Нажмите "Выберите файл" и укажите скачанный SQL-файл
5. Убедитесь, что выбран правильный формат (SQL)
6. Нажмите "Вперед" или "Импортировать"
7. Дождитесь завершения импорта

### Шаг 5: Настройка подключения к базе данных

1. Найдите файл `wp-config.php` в корневой папке сайта
2. Откройте его для редактирования через файловый менеджер или скачайте на компьютер
3. Найдите следующие строки и замените данные на новые:

```php
// Имя базы данных
define('DB_NAME', 'новое_имя_базы_данных');

// Имя пользователя базы данных
define('DB_USER', 'новое_имя_пользователя');

// Пароль базы данных
define('DB_PASSWORD', 'новый_пароль');

// Хост базы данных
define('DB_HOST', 'localhost'); // или другой хост, указанный провайдером
```

4. Сохраните изменения
5. Если редактировали на компьютере, загрузите файл обратно на сервер

### Шаг 6: Проверка работы сайта

1. Откройте ваш сайт в браузере по новому адресу
2. Проверьте основные страницы
3. Войдите в админ-панель WordPress (`/wp-admin/`)
4. Проверьте работу всех функций

#### Возможные проблемы и их решение:

**Ошибка подключения к БД:**

* Проверьте правильность данных в `wp-config.php`
* Убедитесь, что база данных импортирована полностью

**Неправильные ссылки:**

* Измените URL в настройках WordPress

**Проблемы с изображениями:**

* Проверьте права доступа к папке `wp-content/uploads`
* Убедитесь, что все файлы загружены

### Альтернативные варианты

#### Установка с нуля (если данные не критичны):

1. Скачайте последнюю версию WordPress с официального сайта
2. Установите WordPress на новом хостинге
3. Настройте сайт заново
4. При необходимости экспортируйте только контент из старого сайта

#### Использование услуг хостинг-провайдера:

Многие хостинг-провайдеры предлагают бесплатные или платные услуги по переносу сайтов:

* Обратитесь в техподдержку нового хостинга
* Предоставьте данные доступа к старому хостингу
* Дождитесь завершения переноса специалистами

### Рекомендации по безопасности

* Смените все пароли после переноса
* Обновите WordPress и все плагины до актуальных версий
* Проверьте настройки безопасности
* Создайте новые резервные копии на новом хостинге

После успешного переноса и проверки всех функций можно удалять файлы со старого хостинга.
