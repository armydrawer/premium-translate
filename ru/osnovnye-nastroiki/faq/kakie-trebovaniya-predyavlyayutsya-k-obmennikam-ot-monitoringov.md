# Какие требования предъявляются к обменникам от мониторингов?

@Если вы владелец обменника, который размещается на Bestchange или другом мониторинге — вы можете получать письма от них о требованиях соответствия для размещения на площадке.

Мы постарались ответить на популярные вопросы:

<details>

<summary>Атрибут "nofollow"</summary>

Если вы получили письмо от мониторинга со следующим содержанием:

`Мы заметили, что в ссылке, ведущей на наш ресурс, стоит атрибут rel="nofollow". Из-за этого переходы по баннеру не индексируются поисковыми системами, и мы не можем в полной мере оценить трафик, а также теряется вес самой ссылки.`

`Просим вас убрать атрибут nofollow из ссылки. Это позволит:`\
`корректно учитывать переходы с вашего сайта;`\
`повысить значимость размещения для поисковых систем.`

Найдите на вашем сервере файл темы для сайта по пути `wp-content/themes/имя_вашей_темы/`**`pn-homepage.php`**

В файле в классе **parther\_item** удалите только слово **nofollow** и сохраните изменения.

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

</details>

<details>

<summary>"В момент создания или изменения заявки направлять пользователю письмо на адрес электронной почты, указанный пользователем при создании заявки. Письмо должно содержать все основные параметры обмена и реквизиты сторон"</summary>

Вы можете настроить отправку реквизитов в E-mail шаблоне (раздел "**Сообщения**"), добавив в нужную строку шорткод **\[to\_account]** (или по кнопке шорткода "**Счет мерчанта**"). Настройте отправку писем по [инструкции](https://premium.gitbook.io/rukovodstvo-polzovatelya/osnovnye-nastroiki/uvedomleniya/opovesheniya-po-e-mail).

<mark style="background-color:red;">**Для версии 2.5:**</mark>\
выберите, когда запрашивать реквизиты у мерчанта в разделе "**Настройки обменника**" -> "**Основные настройки**". Выберите вариант "**При создании заявки**"

![](<../../.gitbook/assets/image (1124).png>)

\
<mark style="background-color:red;">**Для версии 2.4:**</mark>\
Пользователю будет отправлено 2 письма - письмо о создании заявки и письмо с реквизитами для оплаты (необходимо настроить оба шаблона)

![](<../../.gitbook/assets/image (1305).png>)![](<../../.gitbook/assets/image (1306).png>)

</details>

<details>

<summary>"В то время, когда обменник не работает, отключайте, пожалуйста, файл курсов"</summary>

Создайте режим в разделе "**Режим тех.обслуживания**" и в настройках режима настройте отображение XML-файла

![](<../../.gitbook/assets/image (961).png>)

</details>

<details>

<summary>Включение REST API для мониторинга</summary>

## Предыдущая версия API

Активируйте модуль "**Партнерская программа API**" в разделе "**Модули**"

<img src="../../.gitbook/assets/image (1069).png" alt="" data-size="original">

\
Включите опцию "**Работать с REST API (ppapi)**" в настройках профиля пользователя\
![](<../../.gitbook/assets/image (1243).png>)

## Актуальная версия API

### [Документация по API](https://premium.gitbook.io/main/api-premium-exchanger/api-v1)

Активируйте модуль "**API**" в разделе "**Модули**"

![](<../../.gitbook/assets/image (602).png>)

В разделе "**API - Настройки**" установите опции согласно скриншоту ниже

![](<../../.gitbook/assets/image (603).png>)

Включите опцию "**Работать с REST API**" в настройках профиля пользователя, для которого будут выданы ключи

![](<../../.gitbook/assets/image (601).png>)

После этого пользователь сможет [самостоятельно выпустить ключи](https://premium.gitbook.io/main/api-premium-exchanger/api-v1#poluchenie-api-klyuchei-cherez-lichnyi-kabinet-polzovatelya) для доступа к API обменника.

</details>

<details>

<summary>"Добавьте, пожалуйста, наш адрес с которого мы сканируем ваши курсы валют в whitelist вашей анти-DDOS системы CloudFlare\Incapsula\StormWall"</summary>

Приводим пример для Cloudflare.\
\
Зайдите в раздел "**Security** ➔ **WAF**" в ЛК Cloudflare, затем перейдите на вкладку "**Tools**" и укажите необходимые IP-адреса (выберите действие **Allow**). \
![](<../../.gitbook/assets/image (2126).png>)

Сохраните настройки.

![](<../../.gitbook/assets/image (2127).png>)<br>

</details>

<details>

<summary>Как заменить протокол для ссылки на Telegram-аккаунт на сайте</summary>

Протокол можно поменять только через код, заменив **https://t.me/** на **tg://resolve?domain=** в файле`wp-content/themes/имя_темы/header.php`\
\
До замены:\
![](<../../.gitbook/assets/изображение (84).png>)

После замены:\
![](<../../.gitbook/assets/изображение (21).png>)

</details>

<details>

<summary>Как добавить город в направлении обмена с наличными</summary>

### XML-файл

Добавьте города в разделе "**Города**" и задействуйте их в направлении обмена

![](<../../.gitbook/assets/image (867).png>)

В поле "**Метки для параметра param**" укажите параметры в соответствии с [требованиями Bestchange](https://www.bestchange.ru/wiki/rates.html)

![](<../../.gitbook/assets/image (1114).png>)

После этого информация будет отображать в вашем XML-файле

![](<../../.gitbook/assets/image (1066).png>)

### Письмо по E-mail

В разделе "**Направления обмена**" -> направление обмена с наличными, вкладка "**Шаблон направления обмена**" укажите текст для шаблона с шорткодом "**Город**"

![](<../../.gitbook/assets/image (905).png>)

Затем в разделе "**Сообщения**" -> "**E-mail шаблоны**" для статуса "Новая заявка" добавьте шорткод "**Шаблон направления обмена**".

![](<../../.gitbook/assets/image (1054).png>)

Текст из поля "**Шаблон направления обмена**" будет отображаться в письме

</details>

<details>

<summary>Недоступен экспортный xml-файл с курсами валют для Bestchange</summary>

При недоступности файла добавьте IP-адрес BestChange в панели управления CloudFlare.

### Старая версия личного кабинета Cloudflare

1. Найдите опцию "**Bot Fight Mode**" в разделе "**Security**" ➔ "**Bots**" и активируйте опцию.

<figure><img src="../../.gitbook/assets/image (61).png" alt=""><figcaption></figcaption></figure>

2. В разделе "**Security**" ➔ "**WAF**" ➔ "**Tools**" создайте правило с IP-адресом <mark style="color:red;">**`162.19.29.225`**</mark> и выберите действие "**Allow**". Сохраните правило.

<figure><img src="../../.gitbook/assets/image (62).png" alt=""><figcaption></figcaption></figure>

3. Добавленное правило будет отображаться следующим образом:

<figure><img src="../../.gitbook/assets/image (63).png" alt=""><figcaption></figcaption></figure>

### Новая версия личного кабинета Cloudflare

1. Перейдите в раздел "**Security**" ➔ "**Settings**" ➔ "**Bot traffic**".

<figure><img src="../../.gitbook/assets/image (68).png" alt=""><figcaption></figcaption></figure>

2. Активируйте опцию "**Bot fight mode**".

<figure><img src="../../.gitbook/assets/image (69).png" alt=""><figcaption></figcaption></figure>

3. Добавьте новое правило (IP access rules) в разделе "**Security**" ➔ "**Security rules**".

<figure><img src="../../.gitbook/assets/image (65).png" alt=""><figcaption></figcaption></figure>

4. Укажите IP-адрес <mark style="color:red;">**`162.19.29.225`**</mark> в создаваемом правиле и выберите действие "**Allow**". Сохраните правило.

<figure><img src="../../.gitbook/assets/image (66).png" alt=""><figcaption></figcaption></figure>

5. Добавленное правило будет отображаться следующим образом:

<figure><img src="../../.gitbook/assets/image (67).png" alt=""><figcaption></figcaption></figure>

После этих настроек доступ к xml-файлу будет открыт.

</details>

<details>

<summary>Оповещения об активности в админке сайта при авторизации админа и ежедневная проверка, что данные оповещения работают (на случай несанкционированного доступа в админку)</summary>

У Вас должен быть включен и настроен шаблон в разделе "**Сообщения**" → "**E-mail шаблоны**" → "**Уведомить о входе пользователя в ЛК**".

![](<../../.gitbook/assets/image (2108).png>)

Затем в админке в разделе "**Пользователи**" (выбрать пользователя, об авторизации которого вы хотите получать уведомления) → установите "**Да**" для параметра "**Уведомление при авторизации (E-mail)**"

![](<../../.gitbook/assets/image (2109).png>)

Аналогичные уведомления можно включить для отправки в [Telegram](https://premium.gitbook.io/main/osnovnye-nastroiki/uvedomleniya-administratoram-i-klientam/uvedomleniya-v-telegram) и по SMS

</details>

<details>

<summary>Предоставьте пример рабочей ссылки перехода сразу на направление на вашем обменнике</summary>

Должны быть настроены следующие пункты:\
• коды валют для XML-файла соответствуют стандартам\
• включен модуль "**Редирект на направление обмена**"\
• параметры для вашего обменника передаются от Bestchange (если это не так - обратитесь в техническую поддержку мониторинга и попросите их включить передачу данных)\
![](<../../.gitbook/assets/image (1494).png>)

</details>

<details>

<summary>"Просим Вас в ближайшее время установить последнее обновление модуля Premium Exchanger direction_xml"</summary>

Вам необходимо обновить модуль на сервере для корректной работы сервиса BestChange с вашим экспортным xml-файлом.

1. [Скачайте](https://premiumexchanger.com/uscripts/) дистрибутив с обновлением скрипта под вашу версию скрипта (версия PHP не имеет значения — скачайте любой архив вашей версии).

<figure><img src="../../.gitbook/assets/image (2161).png" alt=""><figcaption></figcaption></figure>

2. Деактивируйте модуль "**Настройка вывода направлений обмена в XML/TXT файле**" в разделе "**Модули**".

<figure><img src="../../.gitbook/assets/image (2162).png" alt=""><figcaption></figcaption></figure>

3. Зайдите в панель ISP Manager под пользователем, созданным для сайта, перейдите в раздел "**Сайты**", выберите нужный сайт и перейдите в раздел "**Файлы сайта**".

<figure><img src="../../.gitbook/assets/image (2159).png" alt=""><figcaption></figcaption></figure>

4. Разархивируйте скачанный ранее архив с обновлением скрипта. Загрузите папку **`direction_xml`**  с заменой существующих файлов на сервер.\
   Путь к папке: <mark style="color:orange;">**`wp-content/plugins/premiumbox/moduls/`**</mark>

<figure><img src="../../.gitbook/assets/image (2160).png" alt=""><figcaption></figcaption></figure>

5. Активируйте модуль "**Настройка вывода направлений обмена в XML/TXT файле**" в разделе "**Модули**".

</details>

<details>

<summary>Размещение нашего баннера в футере обменника. <a href="https://exchangesumo.com/dobavlenie-obmennogo-punkta/">Баннер на выбор</a></summary>

В разделе "**Партнеры**" в панели администратора можно активировать баннер\
![](<../../.gitbook/assets/image (1126).png>)

Если нужного баннера нет в списке, то в разделе "**Партнеры**" нажмите пункт "**Добавить**"​\
![](<../../.gitbook/assets/изображение (188).png>)

Укажите название и добавьте ссылку на партнера, а также загрузите его баннер/картинку\
![](<../../.gitbook/assets/изображение (82).png>)

​К примеру, мониторинг просит разместить вас его баннер: _**"Будем признательны за размещение нашего баннера \<img src="`https://e-mon.ru/b88x31.png`" аlt="Выгодный курс обмена валют" title="Выгодный курс обмена валют" border="0">\</а>"**_&#x20;

`https://e-mon.ru/b88x31.png` - это баннер партнера, который вам необходимо скачать на компьютер и загрузить его в окне, указанном выше

</details>

<details>

<summary>Размещение ссылки/баннера на отзывы о вашем обменнике на exchangesumo после успешного обмена, а также уведомление о возможности получения кэшбека с заявки на exchangesumo (нужно предоставить скриншот).</summary>

В "**Шаблонах направлений обмена валют**" напишите необходимый текст и добавьте ссылку на страницу с отзывами для статуса "**Выполненная заявка**"\
![](<../../.gitbook/assets/image (990).png>)

</details>
