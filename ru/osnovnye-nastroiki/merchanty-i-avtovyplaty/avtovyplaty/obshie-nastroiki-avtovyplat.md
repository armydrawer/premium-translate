# Общие настройки автовыплат

Большинство настроек, указанных в разделе, используются во всех разработанных модулях для мерчантов автовыплат. Некоторые мерчанты имеют особенные параметры, которые будут рассмотрены непосредственно в инструкциях по настройке этих мерчантов.

{% hint style="warning" %}
Обратите внимание, что для каждой валюты необходимо создать [отдельную копию модуля автовыплаты](#user-content-fn-1)[^1], в которой выбрать соответствующую валюту, а затем подключить эту копию на вкладке "**Мерчанты и выплаты**" в настройках направления обмена, где в валюте "**Получаю**" будет выбранная валюта

<img src="../../../.gitbook/assets/image (729).png" alt="" data-size="original">
{% endhint %}

## Настройки модуля:

В связи с тем, что каждый мерчант автовыплаты имеет свой API для авторизации, поля для раздела могут отличаться между собой - вводите полученные от мерчанта авторизационные данные согласно названию полей.

{% tabs %}
{% tab title="Вариант 1" %}
<figure><img src="../../../.gitbook/assets/изображение (125).png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Вариант 2" %}
<figure><img src="../../../.gitbook/assets/изображение (8).png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Вариант 3" %}
<figure><img src="../../../.gitbook/assets/изображение (10).png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Вариант 4" %}
<figure><img src="../../../.gitbook/assets/изображение (20).png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Вариант 5" %}
<figure><img src="../../../.gitbook/assets/изображение (138).png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Вариант 6" %}
<figure><img src="../../../.gitbook/assets/изображение (120).png" alt=""><figcaption></figcaption></figure>
{% endtab %}
{% endtabs %}

## Настройки

В этом разделе у~~к~~азываются общие настройки для работы мерчанта автовыплат.

<figure><img src="../../../.gitbook/assets/image (703).png" alt="" width="563"><figcaption></figcaption></figure>

* **Инструкция по выплатам для пользователя** — рекомендации по выплате для клиента, которые будут отображаться ему на странице с кнопкой "**Перейти к оплате**".

{% hint style="info" %}
Типовой текст для инструкции:\
\
"**Пожалуйста, ожидайте поступления денежных средств на ваш счет."**
{% endhint %}

* **Примечание для платежа** — при наличии этого поля в настройках автовыплаты <mark style="color:red;">**обязательно**</mark> укажите в нем текст из шорткода "**Заявка ID**" (он отобразится как \[exchange\_id]. Это необходимо для передачи мерчанту ID заявки из системы.

<figure><img src="../../../.gitbook/assets/image (704).png" alt=""><figcaption></figcaption></figure>

* **Автовыплата в случае когда заявка имеет статус "Оплаченная заявка"**:\
  • **Нет**\
  • **Да**
* **Автовыплата, в случаях когда заявка имеет статус "На проверке"**:\
  • **Нет**\
  • **Да**
* **Кнопка для ручной выплаты в заявке** — отобразить кнопку в разделе "**Заявки**" для ручной выплаты средств оператором\
  • **Нет**\
  • **Да**

{% hint style="warning" %}
Для использования ручной выплаты по кнопке "**Перевести**" в разделе "**Заявки**" необходимо установить "**Нет**" для параметров "**Автовыплата в случае когда заявка имеет статус "Оплаченная заявка"** и **"Автовыплата, в случаях когда заявка имеет статус "На проверке"**
{% endhint %}

* **Суточный лимит для автовыплаты** — суточный лимит на выплату средств. Мерчант не сможете сделать выплату больше заданного лимита. Указывается в валюте выплаты
* **Месячный лимит для автовыплаты** — месячный лимит на выплату средств. Мерчант не сможет сделать выплату больше заданного лимита.
* **Мин. сумма автовыплаты для заявки** — минимальная сумма автовыплаты для одной заявки. Мерчант не сможет сделать выплату на сумму, меньше указанной.
* **Макс. сумма автовыплаты для заявки** — максимальная сумма автовыплаты для одной заявки. Мерчант не сможет сделать выплату на сумму, больше указанной.

{% hint style="warning" %}
Лимиты указываются в валюте выплаты. Если вы выплачиваете несколько валют с помощью одного мерчанта и хотите использовать лимиты - необходимо создать отдельную копию мерчанта под каждую валюту.
{% endhint %}

* **Сумма, которою передаем на выплату** — тип суммы, которая будет выплачиваться пользователю:\
  • **сумма Получаете (доп. ком.)**\
  • **сумма Получаете (с доп. ком. и комиссией ПС)**\
  • **сумма для резерва**\
  • **сумма со скидкой**
* **Разрешенные IP адреса (с новой строки)** — задайте IP-адрес(а) платежной системы, которому(-ым) разрешен доступ к статусному URL мерчанта. На данный URL платежная система присылает информацию о платеже. Если указать разрешенные IP-адреса, это повышает безопасность работы с мерчантом.

{% hint style="info" %}
IP-адрес(а) платежной системы, с которых она присылает информацию о платеже на статусный URL, можно узнать в технической поддержке платежной системы
{% endhint %}

* **Хэш Cron файла** — задайте хэш, который дополнит URL задания Cron (набор произвольных 20-50 латинских букв и цифр)

{% hint style="danger" %}
Не забудьте создать задание Cron на сервере для проверки платежа - [инструкция](https://premium.gitbook.io/rukovodstvo-polzovatelya/osnovnye-nastroiki/faq/kak-sozdat-zadanie-cron-na-servere) по настройке
{% endhint %}

* **Хэш для Status/Result URL** — задайте хэш, который дополнит статусный URL мерчанта. На данный URL платежная система присылает информацию о платеже. Если задать хэш, статусный URL становится уникальным, что повышает безопасность работы с мерчантом. Рекомендуем использовать хэш длиной 20-50 символов, содержащий латинские буквы и цифры. Пример хэша - `ImYkwGsq2fjhuWypiasqpis8umbxs8umbx`

{% hint style="danger" %}
При настройке автовыплаты на стороне платежной системы в качестве статусного адреса (как правило это Status URL или Return URL) указывайте URL уже с заданным хэшем!
{% endhint %}

* **Режим отладки** — включите режим только при проблемах работы с мерчантами автовыплат. При включенной опции будет записываться расширенный лог мерчанта:\
  • **Нет**\
  • **Да**
* **Задержка автовыплаты в часах** — задержка автовыплаты, если необходимо дополнительно проверить заявку вручную перед автовыплатой

{% hint style="info" %}
К примеру, для установки задержки в 5 минут, укажите в поле 0.08, для задержки в 25 минут укажите 0.33
{% endhint %}

* **Для кого задержка** — категория пользователей, если используется функция задержки автовыплаты:\
  • **для всех**\
  • **для новичков**\
  • **для незарегистрированных пользователей**\
  • **для неверифицированных на сайте пользователей**
* **Ошибка статуса API** — переход в статус заявки, выбранный из выпадающего списка
* **Приоритет** — укажите приоритет [от 1 до 10](#user-content-fn-2)[^2] при использовании автовыплат, если в направлении обмена используются несколько модулей автовыплаты

{% hint style="warning" %}
Наиболее подходящая автовыплата для конкретной заявки выбирается автоматически с учетом приоритета. Автовыплата не может быть заменена, если уже была использована в заявке
{% endhint %}

### Настройки прокси

В этом разделе указывается определенный IP-адрес, если нет доступа к мерчанту с обычного IP-адреса.

<figure><img src="../../../.gitbook/assets/изображение (3) (1) (1) (1).png" alt="" width="402"><figcaption></figcaption></figure>

* **IP адрес** — адрес прокси-сервера
* **Порт** — порт прокси-сервера
* **Логин** — ваш логин для доступа к прокси-серверу
* **Пароль** — ваш пароль для доступа к прокси-серверу
* **Отключить прокси туннель** — отключение опции при заполненных выше полях\
  • **Нет**\
  • **Да**

[^1]: Укажите индивидуальное название для каждой копии в поле "Заголовок" для удобства последующей настройки

[^2]: где:\
    0 или пустое поле - отсутствие приоритета или последний по выполнению, с 1 по возрастанию - рост приоритетности использования (n>...>3>2>1>0)
