# Создание бота

{% embed url="https://youtu.be/TWQolhXH_4U" %}

## Создание бота в Телеграм

В Telegram отправьте пользователю [@BotFather](https://t.me/BotFather) сообщение **/newbot** и следуйте инструкциям по созданию бота. После успешного создания бота, отобразится token - скопируйте его в буфер обмена, т.к. он потребуется для настройки далее. Другие настройки бота изменять не нужно.

<figure><img src="../../.gitbook/assets/BotFather @ Premium Exchanger (38886)_230731152938.png" alt="" width="563"><figcaption></figcaption></figure>

## Добавление нового бота в панели администратора

1. Активируйте модуль "**T-bots**" и "**API"** в разделе "**Модули**"

<figure><img src="../../.gitbook/assets/image (1213).png" alt="" width="563"><figcaption></figcaption></figure>

2. Перейдите в раздел **T-API-bots -> Добавить** и создайте в нём нового бота,  заполнив все указанные ниже опции

* **Заголовок** — название бота для отображения в разделе "**T-API bots**" для вашего удобства идентификации
* **Статус** — статус бота\
  • **Опубликован** — бот будет активен для использования\
  • **Не опубликован** — бот будет не активен для использования
* **Логи** — запись логов по работе бота (раздел **T-API-bots** -> **Логи**)\
  • **Нет** — логи не будут записываться \
  • **Да** — логи будут записываться&#x20;
* **API сервер** — адрес вашего сайта без указания протокола **http(s)**. Например: **obmen.com**

{% hint style="info" %}
Как создать "**API логин**" и "**API ключ**" описано в [этой ](https://premium.gitbook.io/rukovodstvo-polzovatelya/api-premium-exchanger/api)инструкции.
{% endhint %}

* **API логин** — логин из раздела API
* **API ключ** — ключ из раздела API

{% hint style="warning" %}
Обратите внимание, что **обязательно** нужно включить методы в разделе "**API**" ➔ "**Настройки**",

![](<../../.gitbook/assets/image (87).png>)

помимо методов в настройках конкретного API ключа для бота.

![](<../../.gitbook/assets/image (88).png>)\

{% endhint %}

* **Версия** — версия бота (на данный момент доступна только v1)\
  • **v1**
* **Тип** — язык бота на котором он будет общаться с пользователем. Если вы хотите сделать бота на нескольких языках, кто  вам потребуется создать несколько ботов и для каждого выбрать соответствующий язык.\
  • **RU**\
  • **EN**
* **API партнерский id** - если указан ID, все заявки будут считаться партнерскими, указанный пользователь будет получать % со всех обменов. ID пользователя можно посмотреть в разделе "**Пользователи**".
* **Тест сервера** — кнопка проверки подключения бота к API обменника. Результат проверки такого типа будет считаться корректным подключением бота к API.

{% code overflow="wrap" %}
```
Array ( [error] => 0 [error_text] => [data] => Array ( [ip] => 000.000.000.0000 [user_id] => 0 [locale] => ru_RU [partner_id] => 827 ) )
```
{% endcode %}

<figure><img src="../../.gitbook/assets/Добавить ‹ Premium Exchanger — WordPress - Google Chrome_230727183928.png" alt="" width="563"><figcaption></figcaption></figure>

3. Нажмите кнопку "**Сохранить**".
4. Затем заполните поле "**Token**" - скопированный ранее токен созданного телеграм-бота через [@BotFather](https://t.me/BotFather).

<figure><img src="../../.gitbook/assets/Добавить ‹ Premium Exchanger — WordPress - Google Chrome_230727184111.png" alt="" width="563"><figcaption></figcaption></figure>

5. Нажмите кнопку "**Сохранить**".
6. После заполнения всех данных для подключения, произведите регистрацию вебхука, перейдя по ссылке на странице с настройками.

<figure><img src="../../.gitbook/assets/Добавить ‹ Premium Exchanger — WordPress - Google Chrome_230727184233.png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="info" %}
При некорректной работе бота или если бот перестал отвечать на команды - заново зарегистрируйте вебхук - сначала удалите имеющийся и зарегистрируйте новый.
{% endhint %}

7. Введите **@логин** вашего бота в Telegram и нажмите кнопку "**Start**", чтобы начать обмен.

{% hint style="warning" %}
Может потребоваться переактивация[^1] плагина **Premium Exchanger** в разделе "**Плагины**", если бот не отвечает после старта.

![](<../../.gitbook/assets/image (1249).png>)
{% endhint %}

7. По желанию выполните дополнительные [настройки бота](nastroiki-bota.md).
8. Если вы используете CloudFlare или подобный сервис для своего сайта — добавьте [IP-адреса Telegram](https://core.telegram.org/resources/cidr.txt) в Whitelist в вашем сервисе. Инструкция по добавлению в Whitelist CloudFlare доступна [по ссылке](broken-reference).

[^1]: деактивация и повторная активация
